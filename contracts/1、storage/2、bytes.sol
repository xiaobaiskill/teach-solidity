// SPDX-License-Identifier: MIT
pragma solidity ^0.8.17;

contract Bytes {
    bytes public str; // slot: 0x0
    /// 当 bytes.length <= 31 bytes 数据是存储在当前槽位(数据左对齐, length * 2 存储在最低位).
    /// 当 bytes.length > 31 bytes 数据存储在keccak(solt), length + 2 + 1 存储在slot 

    // 1bytes => 8 bit
    /// 1111 1111 => 0xff

    /// in: 0x1111 
    /// 0x0: 0x1111000000000000000000000000000000000000000000000000000000000004 

    /// in: 0x111111111111111111111111111111111111111111111111111111111111 (30 bytes)
    /// out: 0x111111111111111111111111111111111111111111111111111111111111003c 
    
    // in: 0x11111111111111111111111111111111111111111111111111111111111111 (31 bytes)
    // out: 0x111111111111111111111111111111111111111111111111111111111111113e => 3e => 62

    // in: 0x1111111111111111111111111111111111111111111111111111111111111111 (32 bytes)
    // out ;
        // slot: 32 * 2 + 1 = 65 =0x41
        // keccak(slot): 0x1111111111111111111111111111111111111111111111111111111111111111

    // in: 0x111111111111111111111111111111111111111111111111111111111111111122 (33 bytes)
    // out ;
        // slot: 33 * 2 + 1 = 67 =0x42
        // keccak(slot):   0x1111111111111111111111111111111111111111111111111111111111111111
        // keccak(slot)+1: 0x2200000000000000000000000000000000000000000000000000000000000000
        


    // in: 0x11111111111111111111111111111111111111111111111111111111111111112222222222222222222222222222222222222222222222222222222222222222 (64 bytes)
    // out:
        // slot: 64 * 2 + 1 = 129 = 0x81
        // keccak(slot) + 0: 0x1111111111111111111111111111111111111111111111111111111111111111
        // keccak(slot) + 1: 0x2222222222222222222222222222222222222222222222222222222222222222
        

    function setStr(bytes calldata _str)external{
        str = _str;
    }
}
